import streamlit as st
import time

# ุฅุนุฏุงุฏุงุช ุงูุดุงุดุฉ ุงูุงุญุชุฑุงููุฉ
st.set_page_config(page_title="ููุฏ-ูุงุชุดุฑ: ุงูุฑุญูุฉ ุงูุทูููุฉ", page_icon="๐ต๏ธโโ๏ธ", layout="wide")

# ุชุตููู ุงููุงุฌูุฉ (ุงูุฃุฎุถุฑ ูุงูุฃุณูุฏ ุงููุฎู)
st.markdown("""
    <style>
    .stApp { background: #000; color: #00FF41; font-family: 'Courier New', monospace; }
    .chapter-header { color: gold !important; border-bottom: 2px solid gold; padding-bottom: 10px; }
    .story-card { background: rgba(0, 255, 65, 0.05); padding: 25px; border-radius: 15px; border: 1px solid #00FF41; line-height: 2; direction: rtl; font-size: 18px; }
    .stButton > button { width: 100%; border: 2px solid #00FF41; background: transparent; color: #00FF41; font-weight: bold; height: 3.5em; border-radius: 10px; }
    .stButton > button:hover { background: #00FF41; color: black; box-shadow: 0 0 20px #00FF41; }
    .sidebar-text { color: #00FF41; }
    </style>
    """, unsafe_allow_html=True)

# ุฅุฏุงุฑุฉ ุงูุชูุฏู
if 'chapter' not in st.session_state: st.session_state.chapter = 0

# --- ุดุงุดุฉ ุงูุจุฏุงูุฉ ---
if st.session_state.chapter == 0:
    st.markdown("<h1 style='text-align: center;'>๐ต๏ธโโ๏ธ ููุฏ-ูุงุชุดุฑ: ููุญูุฉ ุงูุฃูุงู ุงูุฑููู</h1>", unsafe_allow_html=True)
    st.image("https://r2.erweima.ai/i/6DAnC4M_S2m4_wS_Y1A5pA.png", width=450)
    st.markdown("<div class='story-card'>ุฃููุงู ุจูู ูุง ุงูุฌูุฑู ูู ุฃุทูู ูููุฉ ุณูุจุฑุงููุฉ. ููุฏ ุชู ุงุฎุชูุงุฑูู ูุฃููู ุงูุฃูุถู ูู ุชุญููู ุงูุจูุงูุงุช ุงููุธููุฉ. ุงููุงูุฑ 'ุงูุธู' ุจุฏุฃ ูุฌููุงู ุดุงููุงู ุนูู 5 ูุทุงุนุงุช ุญูููุฉ. ุงูุฑุญูุฉ ุทูููุฉ ูุชุญุชุงุฌ ูุชุฑููุฒูู ุงููุงูู.</div>", unsafe_allow_html=True)
    
    st.write("๐ต **ุชูุนูู ููุณููู ุงููุถุงุก (ุฃุฌูุงุก ุงูุชุญููู):**")
    st.audio("https://www.soundboard.com/handler/DownLoadTrack.ashx?cliptitle=Yargi+Main+Theme&filename=mt/mtyzodm3nzm2mtyzody5_vj_2bl_2bjv_2bq2u.mp3")

    if st.button("๐ ุจุฏุก ุงููููุฉ ุงูููุญููุฉ"):
        st.session_state.chapter = 1
        st.rerun()

# --- ูุตูู ุงููุนุจุฉ ---
chapters = [
    {
        "title": "๐ ุงููุตู 1: ุงุฎุชุฑุงู ูุฎุชุจุฑ ุงููุฏุฑุณุฉ",
        "story": "ุชููู ูุฎุชุจุฑ ุงูุญุงุณุจ ุฑุณุงุฆู ุบุฑูุจุฉ ุชุทูุจ ูุฏูุฉ ููุชุญ ุฃุฌูุฒุฉ ุงูุทูุงุจ. ุงูุชุดููุง ุฃู ุงููุงูุฑ ุฏุฎู ุนุจุฑ 'ููุงุด ููููุฑู' ูููุซ ูุถุนู ุฃุญุฏ ุงูุทูุงุจ ูุฌูููู ุงููููุฉ ูู ุงูุฌูุงุฒ ุงูุฑุฆูุณู.",
        "question": "ูุง ูู ุงูุฎุทูุฉ ุงูุฃููู ูุนุฒู ุงูููุฑูุณ ูููุนู ูู ุงูุงูุชูุงู ูุจููุฉ ุฃุฌูุฒุฉ ุงููุฏุฑุณุฉุ",
        "options": ["ูุตู ุงูุฌูุงุฒ ุงููุตุงุจ ุนู ุงูุดุจูุฉ ููุฑุงู", "ุญุฐู ุงููููุงุช ุงููุดุจููุฉ ูุฏููุงู", "ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฑุงูุชุฑ"],
        "correct": "ูุตู ุงูุฌูุงุฒ ุงููุตุงุจ ุนู ุงูุดุจูุฉ ููุฑุงู"
    },
    {
        "title": "๐ฅ ุงููุตู 2: ูุธุงู ุงููุณุชุดูู ูู ุฎุทุฑ",
        "story": "ุงููุงูุฑ ุงูุชูู ุงูุขู ูุดุจูุฉ ุงููุณุชุดูู ุงููุญูู! ููุฏ ูุงู ุจููู ุจูุงูุงุช ุงููุฑุถู ูููุงุนูุฏ ุงูุนูููุงุช. ุงูุฃุฑูุงุญ ูู ุฎุทุฑ ูุง ุฌูุฑู!",
        "question": "ุงููุงูุฑ ูุณุชุฎุฏู ุชุดููุฑ (Ransomware). ูุง ูู ุฃูุถู ุฏูุงุน ูููุน ุถูุงุน ุงูุจูุงูุงุช ููุฃุจุฏุ",
        "options": ["ุฏูุน ุงููุฏูุฉ ูููุงูุฑ", "ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ (Backup) ุฎุงุฑุฌูุฉ", "ุชุบููุฑ ุงุณู ุงููุณุชุดูู"],
        "correct": "ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช ูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ (Backup) ุฎุงุฑุฌูุฉ"
    },
    {
        "title": "๐ฆ ุงููุตู 3: ุดุจูุฉ ุงูุจููู ุงููุธููุฉ",
        "story": "ุชู ุฑุตุฏ ูุญุงููุงุช ุฏุฎูู ุถุฎูุฉ ูุณูุฑูุฑุงุช ุงูุจูู. ุงููุงูุฑ ูุญุงูู ุชุฎููู ูููุงุช ูุฑูุฑ ุงูููุธููู ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ูุฌุฑูุจ ุขูุงู ุงููููุงุช ูู ุงูุซุงููุฉ.",
        "question": "ูุง ุงุณู ูุฐุง ุงููุฌูู ุงูุฐู ูุนุชูุฏ ุนูู ุงูุชุฎููู ุงููุณุชูุฑุ ูููู ูููููุ",
        "options": ["ูุฌูู ุงูููุฉ ุงูุนููุงุก (Brute Force) - ููููู ุจุชูุนูู ุงูุชุญูู ุงูุซูุงุฆู", "ูุฌูู ุงูููุฑูุณุงุช - ููููู ุจูุณุญ ุงูุดุงุดุฉ", "ูุฌูู ุงูุชุฌุณุณ - ููููู ุจุฅุทูุงุก ุงูุฃููุงุฑ"],
        "correct": "ูุฌูู ุงูููุฉ ุงูุนููุงุก (Brute Force) - ููููู ุจุชูุนูู ุงูุชุญูู ุงูุซูุงุฆู"
    },
    {
        "title": "๐ก ุงููุตู 4: ุงูุณูุทุฑุฉ ุนูู ุงูููุฑ ุงูุตูุงุนู",
        "story": "ูุตู ุงููุงูุฑ ููุฑุญูุฉ ุฎุทูุฑุฉ! ููุฏ ุงุฎุชุฑู ูุธุงู ุงูุงุชุตุงูุงุช ูุจุฏุฃ ุจุงูุชุญูู ูู ููุฑ ุตูุงุนู ุชุนูููู. ูุฑูุฏ ูุทุน ุงูุฅูุชุฑูุช ุนู ุงูุฏููุฉ ุจุงููุงูู.",
        "question": "ุงูุชุดููุง ุฃู ุงููุงูุฑ ุงุณุชุบู ุซุบุฑุฉ ูู ุงูุจุฑูุฌูุงุช ุงููุฏููุฉ (Legacy Systems). ูุง ูู ุงูุญูุ",
        "options": ["ุชุญุฏูุซ ุงููุธุงู ูุนูู (Patch) ููุซุบุฑุงุช", "ุดุฑุงุก ููุฑ ุตูุงุนู ุฌุฏูุฏ", "ุงูุงูุชุธุงุฑ ุญุชู ูุชููู ุงููุงูุฑ"],
        "correct": "ุชุญุฏูุซ ุงููุธุงู ูุนูู (Patch) ููุซุบุฑุงุช"
    },
    {
        "title": "๐ก๏ธ ุงููุตู 5: ุงูููุงุฌูุฉ ุงูููุงุฆูุฉ (ูุฑูุฒ ุงูุธู)",
        "story": "ููุฏ ุญุฏุฏูุง ููุฑ ุงููุงูุฑ ูู 'ุงูุฅูุชุฑูุช ุงููุธูู'. ุฅูู ูุญุงูู ุงูุขู ูุณุญ ุฃุซุฑู ูุงููุฑูุจ. ูุฐู ูู ูุฑุตุชูู ุงูุฃุฎูุฑุฉ ูุฅุซุจุงุช ุฃู 'ููุฏ-ูุงุชุดุฑ' ูู ุงูุฃููู.",
        "question": "ุงููุงูุฑ ุฃุทูู ูุฌููุงู ูุณูู (DDoS) ูุฅุบุฑุงู ูุธุงููู. ููู ุชุชุนุงูููู ูุนูุ",
        "options": ["ุงุณุชุฎุฏุงู ุฌุฏุฑุงู ุญูุงูุฉ ุฐููุฉ ูุชุตููุฉ ุญุฑูุฉ ุงููุฑูุฑ", "ุฅุบูุงู ุญุงุณูุจูู ูุงูุงุฎุชุจุงุก", "ุฅุฑุณุงู ุฑุณุงูุฉ ุงุนุชุฐุงุฑ ูููุงูุฑ"],
        "correct": "ุงุณุชุฎุฏุงู ุฌุฏุฑุงู ุญูุงูุฉ ุฐููุฉ ูุชุตููุฉ ุญุฑูุฉ ุงููุฑูุฑ"
    }
]

if 1 <= st.session_state.chapter <= len(chapters):
    ch = chapters[st.session_state.chapter - 1]
    st.markdown(f"<h2 class='chapter-header'>{ch['title']}</h2>", unsafe_allow_html=True)
    st.markdown(f"<div class='story-card'>{ch['story']}</div>", unsafe_allow_html=True)
    st.write("---")
    
    ans = st.radio(f"### ๐ก๏ธ ุชุญุฏู ุงููุญููุฉ ุงูุฌูุฑู:", ch['options'])
    
    if st.button("ุฅุฑุณุงู ุงูุญู ุงูุฃููู โ๏ธ"):
        if ans == ch['correct']:
            st.success("โ ุฃุญุณูุชู! ุชู ุชุฃููู ุงููุทุงุน ุจูุฌุงุญ. ููุชูู ูููุตู ุงูุชุงูู...")
            time.sleep(2)
            st.session_state.chapter += 1
            st.rerun()
        else:
            st.error("โ ุฎุทุฃ! ุงููุงูุฑ ูุดู ุญุฑูุชูู. ุญุงููู ูุฑุฉ ุฃุฎุฑู ุจุชุฑููุฒ ุฃุนูู.")

# --- ููุงูุฉ ุงูููุญูุฉ ---
elif st.session_state.chapter > len(chapters):
    st.balloons()
    st.markdown("<h1 style='text-align: center; color: gold;'>๐ ุงูุชูุช ุงูููุญูุฉ: ูุตุฑ ุงูุฌูุฑู ุงูุฃุณุทูุฑู</h1>", unsafe_allow_html=True)
    st.markdown("<div class='story-card' style='text-align: center;'>ุจุนุฏ ุฑุญูุฉ ุทูููุฉ ูุดุงูุฉุ ุชู ุชุฃููู ุงููุฏุฑุณุฉุ ุงููุณุชุดููุ ุงูุจููุ ูุงูููุฑ ุงูุตูุงุนู. ุงููุงูุฑ 'ุงูุธู' ุฎูู ุงููุถุจุงู ุงูุขู ุจูุถู ุฐูุงุฆูู. ููุฏ ุฃุตุจุญุชู ูุฑุฌุนุงู ุนุงูููุงู ูู ุงูุฃูู ุงูุณูุจุฑุงูู.</div>", unsafe_allow_html=True)
    
    st.write("### โ๏ธ ูููุฉ ุงููุญููุฉ ุงูุฌูุฑู ููุชุงุฑูุฎ:")
    advice = st.text_area("ุงูุชุจู ูุตูุญุฉ ููู ูู ูุฑูุฏ ุญูุงูุฉ ููุณู ูู ุงููุงูุฑุฒ:")
    
    if st.button("ุญูุธ ุงูููู ูู ุฃุฑุดูู ุงูุนุจุงูุฑุฉ ๐๏ธ"):
        st.success("ุชู ุงูุญูุธ ุจูุฌุงุญ. ุงูุฃุฌูุงู ุงููุงุฏูุฉ ุณุชุชุนูู ูููู.")
        st.markdown("<h3 style='text-align: center;'>ุงููุทูุฑุฉ ูุงููุจุฑูุฌุฉ: ุงูุฌูุฑู โจ</h3>", unsafe_allow_html=True)
        if st.button("ุฅุนุงุฏุฉ ุงูุฑุญูุฉ ูู ุฌุฏูุฏ ๐"):
            st.session_state.chapter = 0
            st.rerun()
